<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
  <title>3.2, 3.0.6, 2.22.6, and 3.3.1 Security Advisory :: Bugzilla :: bugzilla.org</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="keywords" content="bugzilla bug track tracking enterprise solution">
  <link rel="icon" href="/img/bugzilla_icon.png" type="image/png">
  <link rel="stylesheet" type="text/css" href="/css/print.css" media="print">
  <link rel="stylesheet" type="text/css" href="/css/base/content.css" media="all">
  <link rel="stylesheet" type="text/css" href="/css/cavendish/content.css" title="Cavendish" media="all">
  <link rel="stylesheet" type="text/css" href="/css/base/template.css" media="screen">
  <link rel="stylesheet" type="text/css" href="/css/bugzilla.css" media="screen">
  <link rel="stylesheet" type="text/css" href="/css/cavendish/home.css" title="Cavendish" media="screen">
</head>
<body id="www-bugzilla-org" class="homepage">
  <div id="container">
    <p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
    <div id="header">
      <h1><a href="/" title="Return to Bugzilla home page" accesskey="1">Bugzilla</a></h1>
      <div id="tools">
        <ul id="mainNav">
          <li><a href="/contribute/" title="How to Help"
            >Contribute!</a></li>
          <li><a href="/features/" title="Bugzilla features">Features</a></li>
          <li><a href="/download/" title="Get Bugzilla for free">Download</a></li>
          <li><a href="/support/" title="Where to get more help">Support</a></li>
          <li><a href="/docs/" title="Bugzilla documenation">Docs</a></li>
          <li><a href="/news/" title="Read about what is happening with Bugzilla">News</a></li>
          <li><a href="/about/" title="Getting the most out of your online experience">About</a></li>
        </ul>
        <!-- closes #textSize-->
        <form id="search" method="get" action="https://www.google.com/cse">
          <div id="sf">
            <label for="q" title="Search bugzilla.org">search bugzilla.org: </label>
            <input type="hidden" name="cx" value="008043952663535741821:9whwb87ip5a">
            <input type="text" id="q" name="q" accesskey="s" size="30">
            <input type="submit" id="submit" value="go">
          </div>
        </form>
      </div>
     <!-- closes #tools-->
    </div>
    <!-- closes #header-->
    <hr class="hide">
    <div id="mBody">

        <hr class="hide"><div id="side">
<ul id="nav">
<li>
	<a href="/about/" title="Find out more about Bugzilla."><strong>About</strong></a>
	<ul>
		<li><a href="/installation-list/" title="Hundreds of companies and organizations trust Bugzilla.">Who Uses Bugzilla?</a></li>
		<li><a href="/status/roadmap.html" title="Learn about Bugzilla's future.">Roadmap</a></li>
		<li><a href="/developers/profiles.html" title="Meet the Bugzilla team.">Meet the Team</a></li>
		<li><a href="/releases/" title="Information on current and previous releases.">Release Information</a></li>
	</ul>
</li>
<li>
	<a href="/news/" title="Get the low down on what's happening with the project."><strong>News</strong></a>
	<ul>
		<li><a href="http://planet.bugzilla.org" title="View the status of the Bugzilla project.">Planet Bugzilla</a></li>
		<li><a href="/security/" title="Important updates regarding Bugzilla security.">Security Advisories</a></li>
        <li><a href="/status/changes.html" title="Detailed list of all the changes between each Bugzilla version">Change Logs</a></li>
	</ul>
</li>
<li>
        <a href="/download/" title="Download Bugzilla"><strong>Download</strong></a>
        <ul>
                <li><a href="https://wiki.mozilla.org/Bugzilla:Addons" title="Third-party Bugzilla extensions">Extensions</a></li>
                <li><a href="/requirements/">Requirements</a></li>
        </ul>
</li>
<li>
	<a href="/support/" title="Find out where to get more information and help."><strong>Support</strong></a>
	<ul>
                <li><a href="/support/" title="Find out where to get more information and help.">Free Support</a></li>
                <li><a href="/support/consulting.html" title="Paid support options">Paid Support</a></li>
		<li><a href="/docs/" title="Read the Bugzilla manual and other important documents.">Documentation</a></li>
		<li><a href="https://wiki.mozilla.org/Bugzilla" title="Collaboratively updated information about Bugzilla.">Wiki</a></li>
		<li><a href="/developers/reporting_bugs.html" title="Let us know if there is an error in Bugzilla.">Report a Bug</a></li>
	</ul>
</li>
<li>
	<a href="/developers/" title="Developer resources">Developer Resources</a>
</li>
  <li>
    <a href="/contribute/" title="Ways you can help Bugzilla"
    >How To Help Out</a>
  </li>
</ul>

<div>
<p><a href="https://twitter.com/bugzilla">Follow @bugzilla on Twitter</a></p>
<p><a href="https://www.facebook.com/pages/Bugzilla/1427568330846442">Like Bugzilla on Facebook</a></p>
<p><a href="https://plus.google.com/u/0/104215203522965843895?prsrc=3">Follow Bugzilla on Google+</a></p>
</div>
</div>
<!-- closes #side -->      <div id="mainContent">
        <h1>3.2, 3.0.6, 2.22.6, and 3.3.1 Security Advisory</h1>
Feb 2, 2009<br/>
<pre>
Summary
=======

Bugzilla is a Web-based bug-tracking system, used by a large number of
software projects.

This advisory covers three security issues that have recently been
fixed in the Bugzilla code:

* It was possible for users to upload a malicious attachment to
  that would run in the context of Bugzilla's domain (thus 
  circumventing cross-site request protections in browsers).

* Bug updating was vulnerable to a cross-site request forgery.
  Note that this issue was only fixed for 3.2.1 and 3.3.2 even though
  all versions of Bugzilla are affected (see below for an explanation).

* Keywords, unused flag types, and saved searches could be deleted via
  cross-site request forgery. Also, a user's preferences could be
  changed via cross-site request forgery.

All affected installations are encouraged to upgrade as soon as 
possible.

Vulnerability Details
=====================

Class:       Abuse of Functionality (Attachments)
Versions:    Every version before 2.22.7, 3.0.7, 3.2.1, or 3.3.2
Fixed In:    2.22.7, 3.0.7, 3.2.1, 3.3.2
Description: Bugzilla users can upload HTML or JavaScript attachments
             that are then viewed by other users in their web browsers.
             A malicious user could trick another Bugzilla user into
             viewing a malicious attachment that could then operate
             as that user. Since Bugzilla would view attachments
             using the same domain name as the rest of the application,
             such malicious attachments could access the cookies of
             the user and perform other activities usually restricted
             by the cross-site request protections of web browsers.

             Bugzilla now provides a two-fold solution to this problem:

             Bugzilla 2.22.7, 3.0.7, 3.2.1, and 3.3.2 now prevent
             users from viewing attachments in their browsers, by
             default. There is a new parameter named
             "allow_attachment_display" that administrators can enable
             to override this protection.

             Once this parameter is turned on, Bugzilla 3.0.7, 3.2.1,
             and 3.3.2 allow administrators to specify that attachments
             should be viewed using a different domain. This increases
             safety for the end user by enabling the browser's
             cross-domain request protections.

References:  https://bugzilla.mozilla.org/show_bug.cgi?id=38862
             https://bugzilla.mozilla.org/show_bug.cgi?id=472206


Class:       Cross-Site Request Forgery
Versions:    Every version before 3.2.1 or 3.3.2
Fixed In:    3.2.1, 3.3.2
Description: Bug updating was vulnerable to a cross-site request
             forgery, because it did not validate that calls to
             process_bug.cgi actually came from Bugzilla.

             Bugzilla now generates a token that is validated when
             process_bug.cgi is called. This may break automated
             scripts that call process_bug.cgi directly, unless they
             first load show_bug.cgi to get a valid token.

             Unfortunately, a fix for this issue was only possible for
             3.2.1 and 3.3.2. Fixing it on earlier branches would have
             broken Bugzilla's mid-air collision functionality.

             It should be noted that this issue actually was not a
             secret--it has been public knowledge for quite some time.
             It is only included in this security advisory to note that
             a fix is now available.

Reference:   https://bugzilla.mozilla.org/show_bug.cgi?id=26257


Class:       Cross-Site Request Forgery
Versions:    All Versions (for keywords and user preferences), 2.17 
             and higher (for flags), 3.0 and higher (for saved
             searches)
Fixed In:    2.22.7, 3.0.7, 3.2.1, 3.3.2
Description: When deleting saved searches, keywords, or unused 
             (never set on any bug or attachment) flags, or when a user
             updated their preferences, Bugzilla did not properly 
             validate that the request came from Bugzilla. So, it was
             possible to trick a user into click on a link that would
             perform these actions without their consent.

References:  https://bugzilla.mozilla.org/show_bug.cgi?id=466692
             https://bugzilla.mozilla.org/show_bug.cgi?id=466748
             https://bugzilla.mozilla.org/show_bug.cgi?id=472362


Vulnerability Solutions
=======================

The fix for the security bugs mentioned in this advisory are included
in the 3.3.2, 3.2.1, 3.0.7, and 2.22.7 releases (though certain issues
are only fixed for certain versions, as noted above). Upgrading to a
release with the relevant fix will protect your installation from
possible exploits of these issues.

Full release downloads, patches to upgrade Bugzilla from previous
versions, and CVS upgrade instructions are available at:

  https://www.bugzilla.org/download/


Credits
=======

The Bugzilla team wish to thank the following people/organizations for
their assistance in locating, advising us of, and assisting us to fix
these issues:

Frédéric Buclin
Stephen Lee
Jesse Ruderman
Terry Weissman
Max Kanat-Alexander
Teemu Mannermaa
Mozilla Corporation

General information about the Bugzilla bug-tracking system can be found
at:

  https://www.bugzilla.org/

Comments and follow-ups can be directed to the mozilla.support.bugzilla
newsgroup or the support-bugzilla mailing list.
https://www.bugzilla.org/support/ has directions for accessing these
forums.
</pre>
        
      </div>
    </div></div>
  <!-- closes #container -->
  <div id="footer">
    <ul>
      <li><a href="https://www.mozilla.org/contact/">Contact Us</a></li>
      <li><a href="https://donate.mozilla.org/page/contribute/bugzilla">Donate</a></li>
    </ul>
<!-- Creative Commons License -->
<p class="copyright">This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/2.0/">Creative Commons License</a>.</p>

<!--

<rdf:RDF xmlns="http://web.resource.org/cc/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
   <license rdf:resource="http://creativecommons.org/licenses/by-sa/2.0/" />
</Work>

<License rdf:about="http://creativecommons.org/licenses/by-sa/2.0/">
   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
   <requires rdf:resource="http://web.resource.org/cc/Notice" />
   <requires rdf:resource="http://web.resource.org/cc/Attribution" />
   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
   <requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
</License>

</rdf:RDF>

-->
<!-- /Creative Commons License -->

    <p class="copyright">Portions of this work are &copy;
      1998-2016
      by individual bugzilla.org contributors.</p>
    <p>
      <span>Last modified October 27, 2016</span>
      <span><a href="https://github.com/bugzilla/bugzilla.org/commits/master">Site History</a></span>
    </p>
  </div>
</body>
</html>